$(document).ready(function(){function a(a,e){$("#divLoading").removeClass("hidden"),$.ajax({url:a,type:"GET",crossDomain:!0,dataType:"jsonp",headers:{"Access-Control-Allow-Origin":"*"}}).done(function(a){var i="<div class='row labelResults'><strong>Results</strong><br/></div>",n=a.query[e],t="";t="pages"===e?"pageid":"id";for(var r in n)i+="<div class='row'>",i+="<a href='https://en.wikipedia.org/?curid="+n[r][t]+"'  target='_blank'>"+n[r].title+"</a>",i+="pages"===e?"<p>"+n[r].extract+"</p>":"<p>&nbsp;</p>",i+="</div>";$("#results").html(i)}).fail(function(){alert("Can't stablish Wikipedia connection")}).always(function(){$("#divLoading").addClass("hidden")})}$("#qsearch").keyup(function(){var e=$("#qsearch").val(),i="http://en.wikipedia.org/w/api.php?format=json&action=query&generator=search&gsrnamespace=0&gsrlimit=15&prop=pageimages|extracts&pilimit=max&exintro&explaintext&exsentences=1&exlimit=max&gsrsearch="+e,n="pages";a(i,n)}),$("#lnkRandom").click(function(){var e="https://en.wikipedia.org/w/api.php?action=query&list=random&rnlimit=10&rnnamespace=0&format=json",i="random";a(e,i)})});